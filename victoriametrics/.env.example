# VM-Sync Configuration
# Copy to .env.primary or .env.dr and customize

# ======================
# Site Identity
# ======================
ROLE=primary                          # 'primary' or 'dr'

# ======================
# VictoriaMetrics Endpoints
# ======================
LOCAL_VM_URL=http://victoriametrics:8428
REMOTE_VM_URL=http://192.168.100.143:8428

# For primary site: LOCAL=primary-vm, REMOTE=dr-vm
# For DR site:      LOCAL=dr-vm,      REMOTE=primary-vm

# ======================
# DNS Configuration (for determining active site)
# ======================
DNS_RECORD=failover.example.com
DNS_SERVER=8.8.8.8                    # Optional: specific DNS server
PRIMARY_IP=192.168.100.144
DR_IP=192.168.100.143

# ======================
# Sync Settings
# ======================
CHECK_INTERVAL=120                     # Seconds between sync checks
QUERY_WINDOW=3600                      # Seconds to look back (1 hour)
QUERY_STEP=300                         # Bucket size in seconds (5 min)
GAP_THRESHOLD=0.9                      # Sync if dest has <90% of source samples
CHUNK_SIZE=300                         # Export/import chunk size (5 min)

# ======================
# Failback Readiness
# ======================
FAILBACK_CLEAN_CHECKS=3               # Consecutive clean checks before ready
STATE_FILE=/state/vm-sync-state.json

# ======================
# Notifications (optional)
# ======================
NOTIFY_WEBHOOK=                        # Slack/Teams webhook URL
NOTIFY_ON_GAP=true                     # Notify when gaps detected
NOTIFY_ON_SYNC=true                    # Notify when sync completes
NOTIFY_ON_FAILBACK_READY=true          # Notify when failback ready

# ======================
# Logging
# ======================
LOG_LEVEL=INFO                         # DEBUG, INFO, WARN, ERROR
